{% load threadedcomments_tags %}
{% load staticfiles %}

<link href="{% static 'css/comments.css' %}" rel="stylesheet"> <!-- custom css for comment list -->

<div class="container">
    {{ comment_list|length }} Comments
</div>
<p>
<p>

<div class="container">
    {% for comment in comment_list|fill_tree|annotate_tree %}

        {% ifchanged comment.parent_id %}
                <!-- don't start a new list, changed parent_id signals a nested comment -->
        {% else %}
                </li>
        {% endifchanged %}



        {% if not comment.open and not comment.close %}
                </li>
        {% endif %}



        {% if comment.open %}
                <!-- <ul class="list-unstyled"> -->
                <ul class="tree_comment">
        {% endif %}



        <!-- <li class="comment_li" id="c{{ comment.id }}">{# c## is used by the absolute URL of the Comment model, so keep that as it is. #} -->

        <li>

          User: {{ comment.user_name }}
          <br>
          Date: {{ comment.submit_date|date:"d M Y, H:i" }}
          <br>

          Text: {{ comment.comment }}
          <br>
          Depth: {{ comment.depth }}
          <br>
          Reply to Comment: "{{ comment.title }}"
          <p>

          {% for close in comment.close %}
               </li></ul>
          {% endfor %}



    {% endfor %}
</div>


<!-- With help from:
https://github.com/bhaugen/nova/blob/master/templates/customer/comments_for_customer.html
https://github.com/HonzaKral/django-threadedcomments/blob/aa945a0db1dbe1e5f886839d5f25c398890d46a0/examples/core/templates/comments/core/list.html -->
